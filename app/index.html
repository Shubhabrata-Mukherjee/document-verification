<!DOCTYPE html>
<html>
<head>
  <title>SimpleWallet Contract</title>
  <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
  <script src="./app.js"></script>
  <script type="text/javascript" src="web3.js"></script>
  <script type='text/javascript'></script>

</head>
<body>
 <div class="container">
   <div class="row">
     <div class="col-lg-12">
      
       <h1>Example Of Proof Of Existence</h1>       
       <h3>Wallet is on address <span id="walletAddress"></span> and contains <span id="walletEther"></span> ether</h3>
       <button type="button" onclick="App.submitEtherToWallet()">Send some ether to the wallet</button>
       
       <br />
       <br />
       <div id="page-wrapper">
		      <h1>Select a text File</h1>
		      <div>			    
		    	  <input type="file" id="fileInput">
          </div>
          <div>
		        <pre id="fileDisplayArea1"><pre>
          </div>
	    </div>
       
       <br />       
       <br>
       <h1>Submit Hash</h1>
       <form onsubmit="App.submitTransaction(); return false;">
         <div class="form-group">
           <label for="to">Hash (Address)</label>
           <input type="text" class="form-control" id="fileDisplayArea" placeholder="0xDEADBEEF">
         </div>
         <button type="submit" class="btn btn-default">Submit</button>
       </form>

        <br>
       <h1>Check Existence</h1>
       <form onsubmit="App.checkTransaction(); return false;">
         <div class="form-group">
          
           <input type="text" class="form-control" id="fileDisplayArea2" placeholder="0xDEADBEEF">
         </div>
         <button type="submit" class="btn btn-default">Submit</button>
       </form>
      

       <h1>Fetch Transaction</h1>
       <form onsubmit="App.fetchTransaction(); return false;">         
         <button type="submit" class="btn btn-default">All Transaction</button>
       </form>

       <br />
       <br />
       <span id="addresses"></span>
     </div>
   </div>
   
 </div>
</body>
<script>
  // for generating hash from html
window.onload = function() {
        var fileInput = document.getElementById('fileInput');
        var fileDisplayArea = document.getElementById('fileDisplayArea');
        var abc = document.getElementById('abc');

        fileInput.addEventListener('change', function(e) {
            var file = fileInput.files[0];
            var textType = /.*/;
            var textType1 = /mp4.*/;
            var textType2 = /mkv.*/;

            if (file.type.match(textType)) {
                var reader = new FileReader();

                reader.onload = function(e) {
                    //fileDisplayArea.innerText = reader.result.toString();
                    fileDisplayArea.innerText =  web3.sha3(reader.result.toString(),true)
                    fileDisplayArea1.innerText =  web3.sha3(reader.result.toString(),true)
                }

                reader.readAsText(file);    
            } else if(file.type.match(textType1)){
                 var reader = new FileReader();

                reader.onload = function(e) {
                    //fileDisplayArea.innerText = reader.result.toString();
                    fileDisplayArea.innerText =  web3.sha3(reader.result.toString(),true)
                    fileDisplayArea1.innerText =  web3.sha3(reader.result.toString(),true)
                }

                reader.readAsText(file); 
            }
            else if(file.type.match(textType2)){
                 var reader = new FileReader();

                reader.onload = function(e) {
                    //fileDisplayArea.innerText = reader.result.toString();
                    fileDisplayArea.innerText =  web3.sha3(reader.result.toString(),true)
                    fileDisplayArea1.innerText =  web3.sha3(reader.result.toString(),true)
                }

                reader.readAsText(file); 
            }
              else {
                fileDisplayArea.innerText = "File not supported!"
            }
        });
}

</script>

</html>